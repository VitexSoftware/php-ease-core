<<<<<<< HEAD
# WARP.md

This file provides guidance to WARP (warp.dev) when working with code in this repository.

## Repository Overview

EasePHP Core is a small, dependency-light runtime library for building CLI and web applications in PHP. It serves as the foundation for the broader EasePHP ecosystem, providing essential functionality like logging, configuration management, user abstraction, and internationalization.

## Code Architecture

### Core Classes Hierarchy

The framework follows an atom-to-complex hierarchy pattern:

1. **Atom** (`Ease\Atom`) - The minimal base class with object naming and draw() capability
2. **Molecule** (`Ease\Molecule`) - Extends Atom with property setup helpers from options/ENV/constants
3. **Sand** (`Ease\Sand`) - Data holder with typed helpers; integrates logging via trait
4. **Brick** (`Ease\Brick`) - Adds record identity (id/name/array/reuse) through recordkey trait

### Key Modules

1. **Logging** (`Ease\Logger\*`) - Multiple sink logging system
   - `Regent` - Aggregator that dispatches to various output destinations
   - Destinations: memory, console, file, syslog, std, eventlog

2. **Configuration** (`Ease\Shared`) - Configuration layer supporting constants, ENV, .env, and .json

3. **Internationalization** (`Ease\Locale`) - Gettext-based i18n with locale selection

4. **User Management** (`Ease\Anonym`, `Ease\User`) - User abstraction with authentication helpers

5. **Utilities** (`Ease\Functions`, `Ease\Mailer`) - Common utilities and mail functionality built on PEAR Mail

## Development Commands

### Environment Setup

```bash
=======
# WARP.md - Working AI Reference for php-vitexsoftware-ease-core

## Project Overview
**Type**: PHP Project/Debian Package
**Purpose**: ![EasePHP Framework Logo](ease-core-social-preview.png?raw=true "Project Logo")
**Status**: Active
**Repository**: git@github.com:VitexSoftware/php-ease-core.git

## Key Technologies
- PHP
- Composer
- Debian Packaging
- Docker

## Architecture & Structure
```
php-vitexsoftware-ease-core/
├── src/           # Source code
├── tests/         # Test files
├── docs/          # Documentation
└── ...
```

## Development Workflow

### Prerequisites
- Development environment setup
- Required dependencies

### Setup Instructions
```bash
# Clone the repository
git clone git@github.com:VitexSoftware/php-ease-core.git
cd php-vitexsoftware-ease-core

>>>>>>> 95fccee (Improves logging robustness and clarifies development workflow)
# Install dependencies
composer install
```

<<<<<<< HEAD
### Testing

```bash
# Run PHPUnit tests
vendor/bin/phpunit --bootstrap tests/Bootstrap.php --configuration phpunit.xml

# Alternative (using Makefile)
make phpunit
```

### Code Quality

```bash
# Fix code style with PHP CS Fixer
vendor/bin/php-cs-fixer fix --config=.php-cs-fixer.dist.php --diff --verbose

# Alternative (using Makefile)
make cs

# Run static analysis with PHPStan (level 6)
vendor/bin/phpstan analyse --configuration=phpstan-default.neon.dist --memory-limit=-1

# Alternative (using Makefile)
make static-code-analysis

# Run Rector to improve code quality
vendor/bin/rector process --dry-run
```

### Documentation

```bash
# Generate documentation with phpDocumentor
make phpdoc

# Generate documentation with ApiGen
make apigen
```

### Package Building

```bash
# Build Debian package
make deb

# Build RPM package
make rpm

# Build Docker image
make dimage
```

## Configuration

The framework can be configured using PHP constants, environment variables, or configuration files (.env, .json). Key configuration constants include:

- `EASE_APPNAME` - Application name (used in logs)
- `EASE_LOGGER` - Logger sinks (memory, console, file, syslog, email, std, eventlog)
- `EASE_FROM` - Email sender address
- `EASE_SMTP` - SMTP settings (JSON encoded)
- `LOG_DIRECTORY` - File logger directory
- `LOG_FACILITY` - Syslog facility

## Best Practices

1. Use the appropriate base class based on your needs (Atom, Molecule, Sand, Brick)
2. Configure logging through `EASE_LOGGER` constant or environment variable
3. For internationalization, use the `Ease\Locale` class with gettext
4. When extending the framework, follow the existing namespace structure
5. Always run tests after making changes
=======
### Build & Run
```bash
dpkg-buildpackage -b -uc\ndocker build -t php-vitexsoftware-ease-core .
```

### Testing
```bash
composer test
```

## Key Concepts
- **Main Components**: Core functionality and modules
- **Configuration**: Configuration files and environment variables
- **Integration Points**: External services and dependencies

## Common Tasks

### Development
- Review code structure
- Implement new features
- Fix bugs and issues

### Deployment
- Build and package
- Deploy to target environment
- Monitor and maintain

## Troubleshooting
- **Common Issues**: Check logs and error messages
- **Debug Commands**: Use appropriate debugging tools
- **Support**: Check documentation and issue tracker

## Additional Notes
- Project-specific conventions
- Development guidelines
- Related documentation
>>>>>>> 95fccee (Improves logging robustness and clarifies development workflow)
